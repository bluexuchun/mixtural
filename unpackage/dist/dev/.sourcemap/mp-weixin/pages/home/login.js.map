{"version":3,"sources":["webpack:///F:/GitProject/mixtural/main.js","webpack:///F:/GitProject/mixtural/pages/home/login.vue?9e55","webpack:///F:/GitProject/mixtural/pages/home/login.vue?9a50","webpack:///F:/GitProject/mixtural/pages/home/login.vue?8379","webpack:///F:/GitProject/mixtural/static/less/home/login.less?3151","webpack:///F:/GitProject/mixtural/pages/home/login.vue","webpack:///F:/GitProject/mixtural/static/less/home/login.less","webpack:///F:/GitProject/mixtural/pages/home/login.vue?0b7d"],"names":["Page","App","key","computed","userInfo","$store","state","app","profile","token","location","data","protocol","code","protocolShow","methods","init","_this","api","getSysInfo","response","status","is","empty","Utils","getLocation","then","res","latitude","longitude","request","city","result","ad_info","dist","district","commit","lng","lat","console","log","updateLocation","onGetUserInfo","login","codeData","getUserInfo","rawData","loginData","uni","navigateBack","showProtocol","close","onLoad"],"mappings":"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","file":"pages/home/login.js","sourcesContent":["import 'uni-pages';\nimport pageFactory from 'mpvue-page-factory'\n    import App from './pages/home/login.vue'\n    Page(pageFactory(App))","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=a6c1f70e&scoped=true&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"../../static/less/home/login.less?vue&type=style&index=0&id=a6c1f70e&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a6c1f70e\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('a6c1f70e', component.options)\n    } else {\n      api.reload('a6c1f70e', component.options)\n    }\n    module.hot.accept(\"./login.vue?vue&type=template&id=a6c1f70e&scoped=true&\", function () {\n      api.rerender('a6c1f70e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"GitProject/mixtural/pages/home/login.vue\"\nexport default component.exports","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=template&id=a6c1f70e&scoped=true&\"","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!./login.less?vue&type=style&index=0&id=a6c1f70e&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!./login.less?vue&type=style&index=0&id=a6c1f70e&lang=less&scoped=true&\"","\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nimport Utils from '@/utils/index';\r\nimport is from 'is';\r\nimport api from '@/utils/api';\r\nlet key = 'ECSBZ-DYVKU-ZMEVX-4UQSY-C35FJ-FJF3G';\r\nexport default {\r\n    computed: {\r\n        userInfo() {\r\n            return (\r\n                this.$store.state.app.userInfo || {\r\n                    profile: []\r\n                }\r\n            );\r\n        },\r\n        token() {\r\n            return this.$store.state.app.token;\r\n        },\r\n        location() {\r\n            return this.$store.state.app.location;\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            protocol: '',\r\n            code: '',\r\n            protocolShow: false\r\n        };\r\n    },\r\n    methods: {\r\n        async init() {\r\n            let _this = this;\r\n            let response = await api.getSysInfo();\r\n            if (response.status == 1) {\r\n                _this.protocol = response.data.protocol;\r\n            }\r\n            let city, dist, longitude, latitude;\r\n            if (is.empty(_this.location)) {\r\n                await Utils.getLocation('wgs84').then(res => {\r\n                    latitude = res.latitude;\r\n                    longitude = res.longitude;\r\n                });\r\n                await Utils.request(\r\n                    `https://apis.map.qq.com/ws/geocoder/v1/?location=${latitude},${longitude}&key=${key}`\r\n                ).then(res => {\r\n                    city = res.data.result.ad_info.city;\r\n                    dist = res.data.result.ad_info.district;\r\n                    _this.$store.commit('set_location', {\r\n                        city: city,\r\n                        dist: dist,\r\n                        lng: longitude,\r\n                        lat: latitude\r\n                    });\r\n                    console.log(city);\r\n                });\r\n                await api.updateLocation(\r\n                    _this.location.city,\r\n                    _this.location.dist,\r\n                    _this.location.lng,\r\n                    _this.location.lat\r\n                );\r\n            }\r\n        },\r\n        async onGetUserInfo() {\r\n            let _this = this;\r\n            console.log('点击授权1');\r\n            let codeData = await Utils.login();\r\n            console.log('点击授权2');\r\n            _this.code = codeData.code;\r\n            let data = await Utils.getUserInfo();\r\n\t\t\tconsole.log(data.rawData, _this.code)\r\n            let loginData = await api.login(data.rawData, _this.code);\r\n            console.log(loginData);\r\n            _this.$store.commit('set_token', loginData.data.token);\r\n            _this.$store.commit('set_userInfo', loginData.data.userInfo);\r\n            console.log(_this.token, _this.userInfo);\r\n            uni.navigateBack();\r\n        },\r\n        showProtocol() {\r\n            let _this = this;\r\n            _this.protocolShow = true;\r\n        },\r\n        close() {\r\n            let _this = this;\r\n            _this.protocolShow = false;\r\n        }\r\n    },\r\n    onLoad: function() {\r\n        let _this = this;\r\n        _this.init();\r\n    }\r\n};\r\n","// extracted by mini-css-extract-plugin","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"view\", { staticClass: \"main\" }, [\n    _vm._m(0),\n    _c(\"view\", { staticClass: \"tips\" }, [\n      _vm._v(\n        \"为了让您享受更充分的平台服务，小程序需要获取您的昵称、头像等基本信息的授权。点击授权登录即代表同意\\n        \"\n      ),\n      _c(\n        \"text\",\n        {\n          staticClass: \"protocol\",\n          attrs: { eventid: \"05c153c0-0\" },\n          on: { click: _vm.showProtocol }\n        },\n        [_vm._v(\"《用户协议》\")]\n      ),\n      _vm._v(\"。\")\n    ]),\n    _c(\n      \"view\",\n      { staticClass: \"button\" },\n      [\n        _c(\n          \"button\",\n          {\n            attrs: {\n              plain: \"\",\n              \"open-type\": \"getUserInfo\",\n              lang: \"zh_CN\",\n              eventid: \"05c153c0-1\"\n            },\n            on: { getuserinfo: _vm.onGetUserInfo }\n          },\n          [_vm._v(\"授权登录\")]\n        )\n      ],\n      1\n    ),\n    _vm.protocolShow\n      ? _c(\"view\", {\n          staticClass: \"mask\",\n          attrs: { eventid: \"05c153c0-2\" },\n          on: { click: _vm.close }\n        })\n      : _vm._e(),\n    _vm.protocolShow\n      ? _c(\n          \"view\",\n          { staticClass: \"content-box\" },\n          [\n            _c(\"view\", { staticClass: \"header\" }, [\n              _c(\"view\", { staticClass: \"title\" }, [_vm._v(\"用户协议\")]),\n              _c(\"view\", {\n                staticClass: \"iconfont icon-close\",\n                attrs: { eventid: \"05c153c0-3\" },\n                on: { click: _vm.close }\n              })\n            ]),\n            _c(\"rich-text\", {\n              attrs: { nodes: _vm.protocol, mpcomid: \"05c153c0-0\" }\n            })\n          ],\n          1\n        )\n      : _vm._e()\n  ])\n}\nvar staticRenderFns = [\n  function() {\n    var _vm = this\n    var _h = _vm.$createElement\n    var _c = _vm._self._c || _h\n    return _c(\"view\", { staticClass: \"logo\" }, [\n      _c(\"image\", { attrs: { src: \"../../static/images/logo.png\" } })\n    ])\n  }\n]\nrender._withStripped = true\n\nexport { render, staticRenderFns }"],"sourceRoot":""}