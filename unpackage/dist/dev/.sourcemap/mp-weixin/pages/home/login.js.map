{"version":3,"sources":["webpack:////Users/cybob/Desktop/GitProject/mixtural/main.js","webpack:////Users/cybob/Desktop/GitProject/mixtural/pages/home/login.vue?8874","webpack:////Users/cybob/Desktop/GitProject/mixtural/pages/home/login.vue?5153","webpack:////Users/cybob/Desktop/GitProject/mixtural/pages/home/login.vue?8ead","webpack:////Users/cybob/Desktop/GitProject/mixtural/static/less/home/login.less?9a78","webpack:////Users/cybob/Desktop/GitProject/mixtural/pages/home/login.vue","webpack:////Users/cybob/Desktop/GitProject/mixtural/static/less/home/login.less","webpack:////Users/cybob/Desktop/GitProject/mixtural/pages/home/login.vue?552b"],"names":["Page","App","key","computed","userInfo","$store","state","app","profile","token","location","data","protocol","code","protocolShow","methods","init","_this","api","getSysInfo","response","status","is","empty","Utils","getLocation","then","res","latitude","longitude","request","city","result","ad_info","dist","district","commit","lng","lat","console","log","updateLocation","onGetUserInfo","login","codeData","getUserInfo","rawData","loginData","uni","navigateBack","delta","showProtocol","close","onLoad"],"mappings":"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","file":"pages/home/login.js","sourcesContent":["import 'uni-pages';\nimport pageFactory from 'mpvue-page-factory'\n    import App from './pages/home/login.vue'\n    Page(pageFactory(App))","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=5c8ad67a&scoped=true&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"../../static/less/home/login.less?vue&type=style&index=0&id=5c8ad67a&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5c8ad67a\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('5c8ad67a', component.options)\n    } else {\n      api.reload('5c8ad67a', component.options)\n    }\n    module.hot.accept(\"./login.vue?vue&type=template&id=5c8ad67a&scoped=true&\", function () {\n      api.rerender('5c8ad67a', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/cybob/Desktop/GitProject/mixtural/pages/home/login.vue\"\nexport default component.exports","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=template&id=5c8ad67a&scoped=true&\"","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--10-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!./login.less?vue&type=style&index=0&id=5c8ad67a&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--10-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!./login.less?vue&type=style&index=0&id=5c8ad67a&lang=less&scoped=true&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Utils from '@/utils/index';\nimport is from 'is';\nimport api from '@/utils/api';\nlet key = 'ECSBZ-DYVKU-ZMEVX-4UQSY-C35FJ-FJF3G';\nexport default {\n    computed: {\n        userInfo() {\n            return (\n                this.$store.state.app.userInfo || {\n                    profile: []\n                }\n            );\n        },\n        token() {\n            return this.$store.state.app.token;\n        },\n        location() {\n            return this.$store.state.app.location;\n        }\n    },\n    data() {\n        return {\n            protocol: '',\n            code: '',\n            protocolShow: false\n        };\n    },\n    methods: {\n        async init() {\n            let _this = this;\n            let response = await api.getSysInfo();\n            if (response.status == 1) {\n                _this.protocol = response.data.protocol;\n            }\n            let city, dist, longitude, latitude;\n            if (is.empty(_this.location)) {\n                await Utils.getLocation('wgs84').then(res => {\n                    latitude = res.latitude;\n                    longitude = res.longitude;\n                });\n                await Utils.request(\n                    `https://apis.map.qq.com/ws/geocoder/v1/?location=${latitude},${longitude}&key=${key}`\n                ).then(res => {\n                    city = res.data.result.ad_info.city;\n                    dist = res.data.result.ad_info.district;\n                    _this.$store.commit('set_location', {\n                        city: city,\n                        dist: dist,\n                        lng: longitude,\n                        lat: latitude\n                    });\n                    console.log(city);\n                });\n                await api.updateLocation(\n                    _this.location.city,\n                    _this.location.dist,\n                    _this.location.lng,\n                    _this.location.lat\n                );\n            }\n        },\n        async onGetUserInfo() {\n            let _this = this;\n            console.log('点击授权1');\n            let codeData = await Utils.login();\n            console.log('点击授权2');\n            _this.code = codeData.code;\n            let data = await Utils.getUserInfo();\n\t\t\tconsole.log(data.rawData, _this.code)\n            let loginData = await api.login(data.rawData, _this.code);\n            console.log(loginData);\n            _this.$store.commit('set_token', loginData.data.token);\n            _this.$store.commit('set_userInfo', loginData.data.userInfo);\n            console.log(_this.token, _this.userInfo);\n            uni.navigateBack({\n\t\t\t\tdelta:1\n\t\t\t});\n        },\n        showProtocol() {\n            let _this = this;\n            _this.protocolShow = true;\n        },\n        close() {\n            let _this = this;\n            _this.protocolShow = false;\n        }\n    },\n    onLoad: function() {\n        let _this = this;\n        _this.init();\n    }\n};\n","// extracted by mini-css-extract-plugin","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"view\", { staticClass: \"main\" }, [\n    _vm._m(0),\n    _c(\"view\", { staticClass: \"tips\" }, [\n      _vm._v(\n        \"为了让您享受更充分的平台服务，小程序需要获取您的昵称、头像等基本信息的授权。点击授权登录即代表同意\"\n      ),\n      _c(\n        \"text\",\n        {\n          staticClass: \"protocol\",\n          attrs: { eventid: \"005783ab-0\" },\n          on: { click: _vm.showProtocol }\n        },\n        [_vm._v(\"《用户协议》\")]\n      ),\n      _vm._v(\"。\")\n    ]),\n    _c(\n      \"view\",\n      { staticClass: \"button\" },\n      [\n        _c(\n          \"button\",\n          {\n            attrs: {\n              plain: \"\",\n              \"open-type\": \"getUserInfo\",\n              lang: \"zh_CN\",\n              eventid: \"005783ab-1\"\n            },\n            on: { getuserinfo: _vm.onGetUserInfo }\n          },\n          [_vm._v(\"授权登录\")]\n        )\n      ],\n      1\n    ),\n    _vm.protocolShow\n      ? _c(\"view\", {\n          staticClass: \"mask\",\n          attrs: { eventid: \"005783ab-2\" },\n          on: { click: _vm.close }\n        })\n      : _vm._e(),\n    _vm.protocolShow\n      ? _c(\n          \"view\",\n          { staticClass: \"content-box\" },\n          [\n            _c(\"view\", { staticClass: \"header\" }, [\n              _c(\"view\", { staticClass: \"title\" }, [_vm._v(\"用户协议\")]),\n              _c(\"view\", {\n                staticClass: \"iconfont icon-close\",\n                attrs: { eventid: \"005783ab-3\" },\n                on: { click: _vm.close }\n              })\n            ]),\n            _c(\"rich-text\", {\n              attrs: { nodes: _vm.protocol, mpcomid: \"005783ab-0\" }\n            })\n          ],\n          1\n        )\n      : _vm._e()\n  ])\n}\nvar staticRenderFns = [\n  function() {\n    var _vm = this\n    var _h = _vm.$createElement\n    var _c = _vm._self._c || _h\n    return _c(\"view\", { staticClass: \"logo\" }, [\n      _c(\"image\", { attrs: { src: \"../../static/images/logo.png\" } })\n    ])\n  }\n]\nrender._withStripped = true\n\nexport { render, staticRenderFns }"],"sourceRoot":""}