require("../../common/manifest.js");
require("../../common/vendor.js");
global.webpackJsonp([6],{35:function(t,e,o){"use strict";var n=r(o(2)),s=r(o(36));function r(t){return t&&t.__esModule?t:{default:t}}Page((0,n.default)(s.default))},36:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(38),s=o.n(n),r=o(39),a=!1;var i=function(t){a||o(37)},c=o(0)(s.a,r.a,i,"data-v-507017cc",null);c.options.__file="C:\\Users\\34506\\Desktop\\混合端\\pages\\home\\login.vue",c.esModule&&Object.keys(c.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),c.options.functional&&console.error("[vue-loader] login.vue: functional components are not supported with templates, they should use render functions."),e.default=c.exports},37:function(t,e){},38:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=i(o(4)),s=i(o(5)),r=i(o(3)),a=i(o(6));function i(t){return t&&t.__esModule?t:{default:t}}function c(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,o){return function n(s,r){try{var a=e[s](r),i=a.value}catch(t){return void o(t)}if(!a.done)return Promise.resolve(i).then(function(t){n("next",t)},function(t){n("throw",t)});t(i)}("next")})}}e.default={computed:{userInfo:function(){return this.$store.state.app.userInfo||{profile:[]}},token:function(){return this.$store.state.app.token},location:function(){return this.$store.state.app.location}},data:function(){return{protocol:"",code:"",protocolShow:!1}},methods:{init:function(){var t=this;return c(n.default.mark(function e(){var o,i,c,u,l,f;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t,e.next=3,a.default.getSysInfo();case 3:if(1==(i=e.sent).status&&(o.protocol=i.data.protocol),c=void 0,u=void 0,l=void 0,f=void 0,!r.default.empty(o.location)){e.next=13;break}return e.next=9,s.default.getLocation("wgs84").then(function(t){f=t.latitude,l=t.longitude});case 9:return e.next=11,s.default.request("https://apis.map.qq.com/ws/geocoder/v1/?location="+f+","+l+"&key=ECSBZ-DYVKU-ZMEVX-4UQSY-C35FJ-FJF3G").then(function(t){c=t.data.result.ad_info.city,u=t.data.result.ad_info.district,o.$store.commit("set_location",{city:c,dist:u,lng:l,lat:f}),console.log(c)});case 11:return e.next=13,a.default.updateLocation(o.location.city,o.location.dist,o.location.lng,o.location.lat);case 13:case"end":return e.stop()}},e,t)}))()},onGetUserInfo:function(){var e=this;return c(n.default.mark(function o(){var r,i,c,u;return n.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r=e,console.log("点击授权1"),o.next=4,s.default.login();case 4:return i=o.sent,console.log("点击授权2"),r.code=i.code,o.next=9,s.default.getUserInfo();case 9:return c=o.sent,o.next=12,a.default.login(c.rawData,r.code);case 12:u=o.sent,console.log(u),r.$store.commit("set_token",u.data.token),r.$store.commit("set_userInfo",u.data.userInfo),console.log(r.token,r.userInfo),t.navigateBack();case 18:case"end":return o.stop()}},o,e)}))()},showProtocol:function(){this.protocolShow=!0},close:function(){this.protocolShow=!1}},onLoad:function(){this.init()}}}).call(e,o(1).default)},39:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("view",{staticClass:"main"},[t._m(0),o("view",{staticClass:"tips"},[t._v("为了让您享受更充分的平台服务，小程序需要获取您的昵称、头像等基本信息的授权。点击授权登录即代表同意\n        "),o("text",{staticClass:"protocol",attrs:{eventid:"9Gs-0"},on:{click:t.showProtocol}},[t._v("《用户协议》")]),t._v("。")]),o("view",{staticClass:"button"},[o("button",{attrs:{plain:"","open-type":"getUserInfo",lang:"zh_CN",eventid:"CjO-1"},on:{getuserinfo:t.onGetUserInfo}},[t._v("授权登录")])],1),t.protocolShow?o("view",{staticClass:"mask",attrs:{eventid:"GSn-2"},on:{click:t.close}}):t._e(),t.protocolShow?o("view",{staticClass:"content-box"},[o("view",{staticClass:"header"},[o("view",{staticClass:"title"},[t._v("用户协议")]),o("view",{staticClass:"iconfont icon-close",attrs:{eventid:"woH-3"},on:{click:t.close}})]),o("rich-text",{attrs:{nodes:t.protocol,mpcomid:"5Kq-0"}})],1):t._e()])};n._withStripped=!0;var s={render:n,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"logo"},[e("image",{attrs:{src:"../../static/images/logo.png"}})])}]};e.a=s}},[35]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/home/login.js.map